
Estructura del proyecto usando MVC

app/
â”‚
â”œâ”€â”€ public/                   # Punto de entrada (index.php)
â”‚   â”œâ”€â”€ css/
â”‚   â”œâ”€â”€ js/
â”‚   â””â”€â”€ index.php             # Slim arranca aquÃ­
â”‚
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ Controllers/          # Controladores
â”‚   â”œâ”€â”€ Models/               # Modelos
â”‚   â”œâ”€â”€ Views/                # Vistas (Twig)
â”‚   â””â”€â”€ Routes/               # Rutas API
â”‚       â””â”€â”€ api.php
â”‚
â”œâ”€â”€ vendor/                  # Composer (Slim + Twig + etc.)
â”œâ”€â”€ composer.json
â””â”€â”€ .htaccess



***********************
1. INSTALACIÃ“N

1.1 Composer + Slim + Twig
composer require slim/slim:"^4.0"
composer require slim/psr7
composer require slim/twig-view

1.2 .htaccess para redirecciÃ³n (en /public)
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^ index.php [QSA,L]

***********************
âš™ï¸ 2. ARCHIVO DE ENTRADA: /public/index.php

<?php
use Slim\Factory\AppFactory;
use Slim\Views\Twig;
use Slim\Views\TwigMiddleware;

require __DIR__ . '/../vendor/autoload.php';

$app = AppFactory::create();

// Twig
$twig = Twig::create(__DIR__ . '/../app/Views', ['cache' => false]);
$app->add(TwigMiddleware::create($app, $twig));

// CORS (opcional)
$app->add(function ($request, $handler) {
    $response = $handler->handle($request);
    return $response
        ->withHeader('Access-Control-Allow-Origin', '*')
        ->withHeader('Access-Control-Allow-Headers', 'X-Requested-With, Content-Type, Accept, Origin, Authorization')
        ->withHeader('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, OPTIONS');
});

// Rutas
(require __DIR__ . '/../app/Routes/api.php')($app);

$app->run();

***********************
ğŸŒ 3. RUTAS API /app/Routes/api.php
use Slim\App;
use App\Controllers\UserController;

return function (App $app) {
    $app->get('/', [UserController::class, 'index']);
    $app->get('/api/users', [UserController::class, 'getUsers']);
};

***********************
ğŸ§  4. CONTROLADOR /app/Controllers/UserController.php

namespace App\Controllers;

use Psr\Http\Message\ResponseInterface as Response;
use Psr\Http\Message\ServerRequestInterface as Request;
use Slim\Views\Twig;

class UserController {
    public function index(Request $request, Response $response) {
        $view = Twig::fromRequest($request);
        return $view->render($response, 'home.twig');
    }

    public function getUsers(Request $request, Response $response) {
        $data = [
            ['id' => 1, 'name' => 'Ana'],
            ['id' => 2, 'name' => 'Luis']
        ];
        $response->getBody()->write(json_encode($data));
        return $response->withHeader('Content-Type', 'application/json');
    }
}

***********************
ğŸ–¼ï¸ 5. VISTA Twig /app/Views/home.twig
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>App Slim</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-4">
    <h1>Usuarios</h1>
    <button id="loadUsers" class="btn btn-primary">Cargar usuarios</button>
    <ul id="userList" class="mt-3"></ul>Estructura del proyecto usando MVC
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $('#loadUsers').click(function () {
        $.get('/api/users', function (data) {
            $('#userList').empty();
            data.forEach(user => {
                $('#userList').append(`<li>${user.name}</li>`);
            });
        });
    });
</script>
</body>
</html>

***********************
ğŸ§ª 6. PRUEBA
php -S localhost:8000 -t public

Visita: http://localhost:8000/

Haz clic en "Cargar usuarios", y deberÃ­as ver la lista cargada dinÃ¡micamente desde /api/users.







***********************
ğŸ–¥ï¸ Frontend

El frontend es todo lo que el usuario ve e interactÃºa en su navegador. En este caso incluye:

Twig (home.twig): Se usa para generar la pÃ¡gina HTML inicial.

HTML/CSS/JS: Estructura de la pÃ¡gina, estilos, y comportamiento.

Bootstrap: Estilos y componentes visuales listos para usar.

jQuery: Hace peticiones AJAX al backend para obtener datos sin recargar la pÃ¡gina.

Ejemplo en tu proyecto:
$.get('/api/users', function (data) {
    $('#userList').empty();
    data.forEach(user => {
        $('#userList').append(`<li>${user.name}</li>`);
    });
});



***********************
ğŸ–¥ï¸ğŸ› ï¸ Backend

l backend es el cÃ³digo que se ejecuta en el servidor. AquÃ­ se gestiona la lÃ³gica, las rutas, los controladores y el acceso a datos.

Slim Framework (PHP): Maneja las rutas y respuestas.

Controladores: LÃ³gica de negocio, respuesta a peticiones (por ejemplo, UserController).

Twig (plantillas): Aunque genera HTML, se ejecuta del lado del servidor.

Modelos (opcionalmente): Acceso a la base de datos (si agregas).

Ejemplo en tu proyecto:
public function getUsers(Request $request, Response $response) {
    $data = [
        ['id' => 1, 'name' => 'Ana'],
        ['id' => 2, 'name' => 'Luis']
    ];
    $response->getBody()->write(json_encode($data));
    return $response->withHeader('Content-Type', 'application/json');
}


***********************
ComunicaciÃ³n entre Frontend y Backend

El flujo serÃ­a asÃ­:
1. El usuario entra a http://localhost:8000/.
2. El servidor (Slim + Twig) renderiza la vista inicial (home.twig).
3. El usuario hace clic en "Cargar usuarios".
4. jQuery hace una peticiÃ³n AJAX a /api/users.
5. Slim (backend) responde con un JSON de usuarios.
6. jQuery muestra los usuarios en la pÃ¡gina.


***********************
ConclusiÃ³n

SÃ­, estÃ¡s usando:

Frontend â†’ Todo lo visual + interacciÃ³n (HTML, JS, jQuery, Bootstrap, Twig).

Backend â†’ Todo lo que responde a las peticiones, genera la vista inicial y provee los datos (PHP, Slim, controladores).

Â¿Quieres que te muestre cÃ³mo agregar una base de datos real (MySQL o SQLite) para que los datos vengan del backend dinÃ¡micamente?


